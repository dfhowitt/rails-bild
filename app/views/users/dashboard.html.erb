<div class="container">
  <% if current_user.manager %>
    <% first_site = @sites[0] %>
    <% if @sites.length > 1 %>
      <!-- List group -->
      <div class="row pt-4">
        <div class="list-group col-md-3" id="myList" role="tablist">
          <a class="list-group-item list-group-item-action disabled"><strong>Sites</strong></a>
          <a class="list-group-item list-group-item-action active" data-toggle="list" href="#<%= first_site.name %>" role="tab"><%= first_site.name %></a>
          <% @sites.each_with_index do |site, i| %>
            <% next if i == 0 %>
            <a class="list-group-item list-group-item-action" data-toggle="list" href="#<%= site.name %>" role="tab"><%= site.name %></a>
          <% end %>
        </div>

        <!-- Tab panes -->
        <div class="tab-content col-md-9">
          <div class="tab-pane fade show active" id="<%= first_site.name %>" role="tabpanel">
            <%= render partial: 'site', locals: {site: first_site} %>
          </div>
          <% @sites.each_with_index do |site, i| %>
            <% next if i == 0 %>
            <div class="tab-pane fade" id="<%= site.name %>" role="tabpanel">
              <%= render partial: 'site', locals: {site: site} %>
            </div>
          <% end %>
        </div>
      </div>

    <% elsif @sites.length == 1 %>
      <%= render 'site', site: first_site %>

    <% else %>
      <p class="text-center bg-info rounded py-2 border mb-5">You do not have any sites, please create one using the form below.</p>
      <h1 class="text-center">Create a Site:</h1>
      <div class="site-form col-sm-8 offset-sm-2">
        <%= simple_form_for(@new_site) do |f| %>
            <%= f.input :name, input_html: { placeholder: "Enter a name for your site" } %>
            <%= f.input :site_type,
                  collection: ["Commercial", "Industrial", "Residential"],
                  prompt: "-- Select the correct site type --" %>
            <%= f.input :location, input_html: { placeholder: "Where is the site located.." } %>
            <%= f.submit "Create Site", class: "btn btn-primary w-100"%>
        <% end %>
      </div>
    <% end %>

  <% else %>

    <ul class="nav nav-tabs">
      <li class="tab active" id="tab-placements"><a href="#">Upcoming</a></li>
      <li class="tab" id="tab-applications"><a href="#">Applications</a></li>
      <li class="tab" id="tab-history"><a href="#">History</a></li>
      <li class="tab" id="tab-qualifications"><a href="#">Your Qualifications</a></li>
    </ul>

    <div class="tab-content">
      <div class="tab-pane active" id="placements">
        <%= render 'placements' %>
      </div>
      <div class="tab-pane" id="applications">
        <%= render 'applications' %>
      </div>
      <div class="tab-pane" id="history">
        <%= render 'history' %>
      </div>
      <div class="tab-pane" id="qualifications">
        <%= render 'qualifications' %>
      </div>
    </div>

  <% end %>
</div>
